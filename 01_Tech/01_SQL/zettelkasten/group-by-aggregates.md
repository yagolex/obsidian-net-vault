# GROUP BY, –∞–≥—Ä–µ–≥–∞—Ç–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã

`GROUP BY` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –ø–æ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏—è–º –∏ –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–π `COUNT`, `SUM`, `AVG` –∏ —Ç.–¥.

## üìÑ –û–±—â–∏–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å:
```sql
SELECT Column1, AGG_FUNC(Column2)
FROM TableName
GROUP BY Column1;
```

–†–∞—Å—Å–º–æ—Ç—Ä–∏–º –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–∏–º–µ—Ä–æ–≤ –∏—Å–ø–æ–ª—å–∑—É—è –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã **Orders**:

| OrderID | CustomerID | Amount | OrderDate  |
| ------- | ---------- | ------ | ---------- |
| 1       | 101        | 100    | 15-06-2023 |
| 2       | 102        | 200    | 13-05-2024 |
| 3       | 101        | 150    | 17-09-2024 |
| 4       | 103        | 300    | 18-11-2025 |

## –ü—Ä–∏–º–µ—Ä 1: –ü–æ–¥—Å—á–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–∫–∞–∑–æ–≤ –ø–æ –∫–ª–∏–µ–Ω—Ç—É:


```sql
SELECT CustomerID, COUNT(*) AS OrderCount
FROM Orders
GROUP BY CustomerID;
```

üîç **–†–µ–∑—É–ª—å—Ç–∞—Ç:**

|CustomerID|OrderCount|
|---|---|
|101|2|
|102|1|
|103|1|
üéØ –ú—ã —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–ª–∏ —Å—Ç—Ä–æ–∫–∏ –ø–æ `CustomerID`, –∏ –¥–ª—è –∫–∞–∂–¥–æ–π –≥—Ä—É–ø–ø—ã –ø–æ—Å—á–∏—Ç–∞–ª–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫.
## –ü—Ä–∏–º–µ—Ä 2: –°—Ä–µ–¥–Ω–∏–π —á–µ–∫ –ø–æ –∫–ª–∏–µ–Ω—Ç—É

```sql
SELECT CustomerID, AVG(Amount) AS AverageAmount
FROM Orders
GROUP BY CustomerID;
```

üîç **–†–µ–∑—É–ª—å—Ç–∞—Ç:**

| CustomerID | AverageAmount |
| ---------- | ------------- |
| 101        | 125.00        |
| 102        | 200.00        |
| 103        | 300.00        |
## –ü—Ä–∏–º–µ—Ä 3: –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–∞—Ç–µ (–ø–æ –≥–æ–¥—É)
```sql
SELECT YEAR(OrderDate) AS OrderYear, SUM(Amount) AS TotalAmount
FROM Orders
GROUP BY YEAR(OrderDate);
```

üîç –≠—Ç–æ —É–¥–æ–±–Ω–æ –¥–ª—è –≥–æ–¥–æ–≤—ã—Ö –∏–ª–∏ –∫–≤–∞—Ä—Ç–∞–ª—å–Ω—ã—Ö –æ—Ç—á–µ—Ç–æ–≤.

## –ü—Ä–∏–º–µ—Ä 4: –ì—Ä—É–ø–ø—ã —Å –±–æ–ª–µ–µ —á–µ–º 1 –∑–∞–∫–∞–∑–æ–º (`HAVING`)
```sql
SELECT CustomerID, COUNT(*) AS OrderCount
FROM Orders
GROUP BY CustomerID
HAVING COUNT(*) > 1;
```

üîç **–†–µ–∑—É–ª—å—Ç–∞—Ç**: —Ç–æ–ª—å–∫–æ —Ç–µ –∫–ª–∏–µ–Ω—Ç—ã, —É –∫–æ—Ç–æ—Ä—ã—Ö **–±–æ–ª–µ–µ –æ–¥–Ω–æ–≥–æ –∑–∞–∫–∞–∑–∞**.
## –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
- `SUM`, `AVG`, `COUNT`, `MIN`, `MAX`
## üß†–ù—é–∞–Ω—Å—ã:
- –í—Å–µ –ø–æ–ª—è –≤ SELECT, –Ω–µ –≤—Ö–æ–¥—è—â–∏–µ –≤ –∞–≥—Ä–µ–≥–∞—Ç–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é, –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ GROUP BY
- –ú–æ–∂–Ω–æ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å –ø–æ –≤—ã—Ä–∞–∂–µ–Ω–∏—è–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, FORMAT –∏–ª–∏ DATEPART)
- –ò—Å–ø–æ–ª—å–∑—É–µ–º `HAVING` –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ—Å–ª–µ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ (–ê–Ω–∞–ª–æ–≥ `WHERE`, –Ω–æ **–ø–æ—Å–ª–µ** `GROUP BY`)

## –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ç–µ–º—ã:
- [[sql-joins]]
- [[execution-plan]]

## üîÅ –ü—Ä–∞–∫—Ç–∏–∫–∞ –∏ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ
- [[group-by-aggregates_bloom]]
- [[group-by-aggregates_quiz]]

#sql #zettelkasten
