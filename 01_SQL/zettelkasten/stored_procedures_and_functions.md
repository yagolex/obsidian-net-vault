# –•—Ä–∞–Ω–∏–º—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏

## üì¶ –•—Ä–∞–Ω–∏–º—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã (Stored Procedures):

–•—Ä–∞–Ω–∏–º–∞—è –ø—Ä–æ—Ü–µ–¥—É—Ä–∞ ‚Äî —ç—Ç–æ **–Ω–∞–±–æ—Ä SQL-–∫–æ–º–∞–Ω–¥**, —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–π –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–¥ –∏–º–µ–Ω–µ–º, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è. –û–±—ã—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è **–±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏**, **–æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –¥–∞–Ω–Ω—ã—Ö**, **–º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–π**, –∏–ª–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è **—Ü–µ–ª–æ–π —Ü–µ–ø–æ—á–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π**.
### –°–æ–∑–¥–∞–Ω–∏–µ SP:
```sql
CREATE PROCEDURE GetStudentCourses
    @StudentID INT
AS
BEGIN
    SELECT c.Title
    FROM Enrollments e
    JOIN Courses c ON e.CourseID = c.CourseID
    WHERE e.StudentID = @StudentID;
END;
```
### –í—ã–∑–æ–≤ SP:
```sql

EXEC GetStudentCourses @StudentID = 1;

```


## –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ (User-Defined Functions / UDF):

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è —Ñ—É–Ω–∫—Ü–∏—è ‚Äî —ç—Ç–æ SQL-—Ñ—É–Ω–∫—Ü–∏—è, –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∞—è **–∑–Ω–∞—á–µ–Ω–∏–µ –∏–ª–∏ —Ç–∞–±–ª–∏—Ü—É**, –∫–æ—Ç–æ—Ä—É—é –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **–≤–Ω—É—Ç—Ä–∏ –∑–∞–ø—Ä–æ—Å–∞**, –∫–∞–∫ –ª—é–±—É—é –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é (`LEN()`, `GETDATE()`, –∏ —Ç. –ø.).

### üìå –ü—Ä–∏–º–µ—Ä —Å–∫–∞–ª—è—Ä–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–¥–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ):
```sql
CREATE FUNCTION dbo.GetCourseCount(@StudentID INT)
RETURNS INT
AS
BEGIN
    DECLARE @Count INT;
    SELECT @Count = COUNT(*) FROM Enrollments WHERE StudentID = @StudentID;
    RETURN @Count;
END;

```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
```sql
SELECT Name, dbo.GetCourseCount(StudentID) AS CourseCount
FROM Students;
```

### üìå –ü—Ä–∏–º–µ—Ä —Ç–∞–±–ª–∏—á–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—É):
```sql
CREATE FUNCTION dbo.GetStudentCourses(@StudentID INT)
RETURNS TABLE
AS
RETURN
    SELECT c.Title
    FROM Enrollments e
    JOIN Courses c ON e.CourseID = c.CourseID
    WHERE e.StudentID = @StudentID;

```

### üõ† –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
```sql
SELECT * FROM dbo.GetStudentCourses(1);
```


## üÜö –û—Å–Ω–æ–≤–Ω—ã–µ –æ—Ç–ª–∏—á–∏—è

| –ö—Ä–∏—Ç–µ—Ä–∏–π                  | –•—Ä–∞–Ω–∏–º–∞—è –ø—Ä–æ—Ü–µ–¥—É—Ä–∞                                                             | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è —Ñ—É–Ω–∫—Ü–∏—è                 |
| ------------------------- | ------------------------------------------------------------------------------ | ---------------------------------------- |
| **–í–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ** | –ú–æ–∂–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å 0 –∏–ª–∏ –±–æ–ª–µ–µ –∑–Ω–∞—á–µ–Ω–∏–π —á–µ—Ä–µ–∑ OUT, —Ç–∞–±–ª–∏—Ü—É, SELECT, –Ω–æ –Ω–µ RETURN | –í—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –∏–ª–∏ —Ç–∞–±–ª–∏—Ü—É   |
| **–í—ã–∑–æ–≤ –∏–∑ SELECT**       | ‚ùå –ù–µ–ª—å–∑—è –≤—ã–∑–≤–∞—Ç—å –∏–∑ SELECT                                                     | ‚úÖ –ú–æ–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å –≤–Ω—É—Ç—Ä–∏ SELECT            |
| **–ü–æ–±–æ—á–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã**      | ‚úÖ –ú–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å –¥–∞–Ω–Ω—ã–µ (INSERT, UPDATE, DELETE)                                 | ‚ùå –ù–µ –º–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å –¥–∞–Ω–Ω—ã–µ (—Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ) |
| **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ JOIN**  | ‚ùå –ù–µ–ª—å–∑—è                                                                       | ‚úÖ –¢–∞–±–ª–∏—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –º–æ–∂–Ω–æ                |
| **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤–Ω—É—Ç—Ä–∏**     | ‚úÖ –î–∞                                                                           | ‚ùå –ù–µ—Ç (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ)                       |

## üéØ –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?

| –°—Ü–µ–Ω–∞—Ä–∏–π                                                              | –ò—Å–ø–æ–ª—å–∑—É–π                        |
| --------------------------------------------------------------------- | -------------------------------- |
| –ù—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å–ª–æ–∂–Ω—É—é –ª–æ–≥–∏–∫—É —Å –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–µ–π –¥–∞–Ω–Ω—ã—Ö                  | üîπ –•—Ä–∞–Ω–∏–º–∞—è –ø—Ä–æ—Ü–µ–¥—É—Ä–∞            |
| –ù—É–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ `SELECT`, `WHERE`, `JOIN` | üîπ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è —Ñ—É–Ω–∫—Ü–∏—è      |
| –ù—É–∂–Ω–æ –∏–Ω–∫–∞–ø—Å—É–ª–∏—Ä–æ–≤–∞—Ç—å –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –¥–ª—è –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è             | –û–±–∞ (–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞) |

## Related topics:
- [[table-vars-vs-temp-tables]]
- [[cte-vs-temp-tables]]
- [[user-variables]]


#sql #zettelkasten
