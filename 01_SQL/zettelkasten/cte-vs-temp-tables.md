# CTE (WITH expression) vs –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã

## CTE (Common Table Expression):
- –í—Ä–µ–º–µ–Ω–Ω–æ–µ –∏–º–µ–Ω–æ–≤–∞–Ω–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ, –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–µ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –æ–¥–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
- –ù–µ –∫—ç—à–∏—Ä—É–µ—Ç—Å—è

```sql

WITH RecentOrders AS (
  SELECT * FROM Orders WHERE OrderDate >= '2024-01-01'
)
SELECT * FROM RecentOrders WHERE Amount > 1000;

```

## –í—Ä–µ–º–µ–Ω–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞:
- –°–æ–∑–¥–∞—ë—Ç—Å—è –≤ tempdb
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∏–Ω–¥–µ–∫—Å—ã –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
- –ú–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö

```sql
CREATE TABLE #RecentOrders (...);
```

## –†–∞–∑–ª–∏—á–∏—è:
- CTE ‚Äî —á–∏—Ç–∞–µ–º–æ—Å—Ç—å, –≤—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç—å
- Temp table ‚Äî –∫—ç—à–∏—Ä—É–µ–º–æ—Å—Ç—å, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ, –æ–±—ä—ë–º–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

## –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ç–µ–º—ã:
- [[table-vars-vs-temp-tables]]
- [[recursive-queries]]
- [[execution-plan]]

## üîÅ –ü—Ä–∞–∫—Ç–∏–∫–∞ –∏ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ
- [[cte-vs-temp-tables_bloom]]
- [[cte-vs-temp-tables_quiz]]

#sql #zettelkasten