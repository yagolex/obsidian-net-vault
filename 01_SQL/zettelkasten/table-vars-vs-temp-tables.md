# –¢–∞–±–ª–∏—Ü—ã-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã

## üìë –ß–∞—Å—Ç—å 1: –¢–∞–±–ª–∏—Ü–∞-–ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è (@Table):

–≠—Ç–æ **–ª–æ–∫–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è**, –æ–±—ä—è–≤–ª—è–µ–º–∞—è —Å –ø–æ–º–æ—â—å—é `DECLARE`, —Ö—Ä–∞–Ω—è—â–∞—è —Ç–∞–±–ª–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ. –°—É—â–µ—Å—Ç–≤—É–µ—Ç **—Ç–æ–ª—å–∫–æ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö —Ç–µ–∫—É—â–µ–≥–æ –±–ª–æ–∫–∞ –∫–æ–¥–∞** (–ø—Ä–æ—Ü–µ–¥—É—Ä—ã, —Ñ—É–Ω–∫—Ü–∏–∏, –ø–∞–∫–µ—Ç–∞).

- –û–±—ä—è–≤–ª—è–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã
- –ù–µ –∏–º–µ–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- –õ—É—á—à–µ –¥–ª—è –Ω–µ–±–æ–ª—å—à–∏—Ö –Ω–∞–±–æ—Ä–æ–≤ –¥–∞–Ω–Ω—ã—Ö
### üìå –ü—Ä–∏–º–µ—Ä:
```sql
DECLARE @Students TABLE (
    StudentID INT,
    Name NVARCHAR(100)
);

INSERT INTO @Students (StudentID, Name)
VALUES (1, 'Alice'), (2, 'Bob');

SELECT * FROM @Students;
```

## üìë –ß–∞—Å—Ç—å 2: –í—Ä–µ–º–µ–Ω–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ (#Temp):

–≠—Ç–æ —Ç–∞–±–ª–∏—Ü—ã, —Å–æ–∑–¥–∞–≤–∞–µ–º—ã–µ –≤ **—Ç–µ–º–ø–æ–≤–æ–π (–≤—Ä–µ–º–µ–Ω–Ω–æ–π) –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö**. –û–Ω–∏ **—Ö—Ä–∞–Ω—è—Ç—Å—è —Ñ–∏–∑–∏—á–µ—Å–∫–∏** –≤ `tempdb` –∏ –º–æ–≥—É—Ç –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã **–≤–æ –≤—Å–µ–π —Å–µ—Å—Å–∏–∏**, –∏–Ω–æ–≥–¥–∞ –¥–∞–∂–µ –≤ –¥—Ä—É–≥–∏—Ö –ø—Ä–æ—Ü–µ–¥—É—Ä–∞—Ö —Ç–æ–π –∂–µ —Å–µ—Å—Å–∏–∏.

- –°–æ–∑–¥–∞—ë—Ç—Å—è –≤ tempdb
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∏–Ω–¥–µ–∫—Å—ã –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
- –£–¥–æ–±–Ω–∞ –ø—Ä–∏ –±–æ–ª—å—à–∏—Ö –æ–±—ä—ë–º–∞—Ö –∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö

### üìå –ü—Ä–∏–º–µ—Ä:
```sql
CREATE TABLE #Students (
    StudentID INT,
    Name NVARCHAR(100)
);

INSERT INTO #Students (StudentID, Name)
VALUES (1, 'Alice'), (2, 'Bob');

SELECT * FROM #Students;

-- –û—á–∏—Å—Ç–∫–∞ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞, –Ω–æ —Ö–æ—Ä–æ—à–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞)
DROP TABLE #Students;
```


## üìë –ß–∞—Å—Ç—å 3: üîç –°—Ä–∞–≤–Ω–µ–Ω–∏–µ: —Ç–∞–±–ª–∏—Ü–∞-–ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è vs –≤—Ä–µ–º–µ–Ω–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞

| –ö—Ä–∏—Ç–µ—Ä–∏–π                         | –¢–∞–±–ª–∏—Ü–∞-–ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è (`@`)                        | –í—Ä–µ–º–µ–Ω–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ (`#`)                           |
| -------------------------------- | ----------------------------------------------- | ------------------------------------------------- |
| **–û–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏**            | –¢–æ–ª—å–∫–æ –≤ —Ç–µ–∫—É—â–µ–º –±–ª–æ–∫–µ (–ø—Ä–æ—Ü–µ–¥—É—Ä–∞/—Ñ—É–Ω–∫—Ü–∏—è)      | –í—Å—è —Å–µ—Å—Å–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏–ª–∏ –≤–ª–æ–∂–µ–Ω–Ω–∞—è –ø—Ä–æ—Ü–µ–¥—É—Ä–∞    |
| **–û–±—ä–µ–º –¥–∞–Ω–Ω—ã—Ö**                 | –•–æ—Ä–æ—à–æ –¥–ª—è **–Ω–µ–±–æ–ª—å—à–∏—Ö** –æ–±—ä–µ–º–æ–≤                | –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è **–±–æ–ª—å—à–∏—Ö** –æ–±—ä–µ–º–æ–≤                  |
| **–•—Ä–∞–Ω–µ–Ω–∏–µ**                     | –í `tempdb`, –Ω–æ –ø–æ—á—Ç–∏ –±–µ–∑ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏             | –í `tempdb`, —Å –ø–æ–ª–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏        |
| **–ò–Ω–¥–µ–∫—Å—ã**                      | –¢–æ–ª—å–∫–æ **–ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á –∏ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ**          | –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–µ: `CREATE INDEX`, `PRIMARY KEY`, –∏ –¥—Ä. |
| **–ü–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫**    | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ ‚Üí —Ö—É–∂–µ –ø–ª–∞–Ω—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è | –ï—Å—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ ‚Üí –ª—É—á—à–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤      |
| **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏**                   | –ù–µ–∑–∞–≤–∏—Å–∏–º—ã, –Ω–µ –æ—Ç–∫–∞—Ç—ã–≤–∞—é—Ç—Å—è –ø—Ä–∏ `ROLLBACK`      | –£–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏, –æ—Ç–∫–∞—Ç—ã–≤–∞—é—Ç—Å—è            |
| **–£–¥–∞–ª–µ–Ω–∏–µ –≤—Ä—É—á–Ω—É—é**             | –ù–µ –Ω—É–∂–Ω–æ                                        | –ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ `DROP TABLE #...`                      |
| **–ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ —Ñ—É–Ω–∫—Ü–∏–∏** | ‚úÖ –î–∞                                            | ‚ùå –ù–µ—Ç                                             |
| **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ DDL (ALTER, DROP)**  | ‚ùå –ù–µ—Ç                                           | ‚úÖ –î–∞                                              |
## üìë –ß–∞—Å—Ç—å 4: üéØ –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

|–°—Ü–µ–Ω–∞—Ä–∏–π|–õ—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å|
|---|---|
|–ù–µ–±–æ–ª—å—à–æ–π –Ω–∞–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö (–¥–æ —Å–æ—Ç–µ–Ω —Å—Ç—Ä–æ–∫)|`@TableVar`|
|–í—Ä–µ–º–µ–Ω–Ω—ã–µ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏, —Ö—Ä–∞–Ω–∏–º—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã|–û–±–∞ (–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –æ–±—ä—ë–º–∞)|
|–ù—É–∂–Ω–æ –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å, —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å ‚Äî —Ç–æ—á–Ω–æ|`#TempTable`|
|–ù—É–∂–Ω–æ –≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π —Ñ—É–Ω–∫—Ü–∏–∏|`@TableVar`|
|–ù—É–∂–Ω–æ –≤—Ä–µ–º–µ–Ω–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–ª–æ–∂–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞|`#TempTable`|
|–ù—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –º–µ–∂–¥—É –≤–ª–æ–∂–µ–Ω–Ω—ã–º–∏ –ø—Ä–æ—Ü–µ–¥—É—Ä–∞–º–∏|`#TempTable`|

## üìë –ß–∞—Å—Ç—å 5: üß† –•–∞–∫: –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã

–ï—Å–ª–∏ —Å–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É –∫–∞–∫ `##GlobalTemp`, –æ–Ω–∞ –±—É–¥–µ—Ç **–≤–∏–¥–Ω–∞ –≤–æ –≤—Å–µ—Ö —Å–µ—Å—Å–∏—è—Ö** (–ø–æ–∫–∞ —Å–µ—Å—Å–∏—è, —Å–æ–∑–¥–∞–≤—à–∞—è –µ—ë, –∞–∫—Ç–∏–≤–Ω–∞):

### üìå –ü—Ä–∏–º–µ—Ä:
```sql
CREATE TABLE ##GlobalData (
    ID INT,
    Value NVARCHAR(100)
);
```


## –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ç–µ–º—ã:
- [[cte-vs-temp-tables]]
- [[execution-plan]]
- [[user-variables]]
- [[table-vars-vs-cursors]]

## üîÅ –ü—Ä–∞–∫—Ç–∏–∫–∞ –∏ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ
- [[table-vars-temp-tables_bloom]]
- [[table-vars-temp-tables_quiz]]

#sql #zettelkasten